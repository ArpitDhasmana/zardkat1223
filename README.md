# FirstCircuit on Sepolia Testnet üê±

## Introduction

This project demonstrates the deployment of a custom circuit created using Circom on the Ethereum Sepolia testnet. The circuit implements basic logic gates (AND, OR, NOT) and combines them to perform a simple logical operation. The core functionality is encapsulated in the `FirstCircuit` template.

## Circuit Description

### Templates

```circom
pragma circom 2.0.0;

template FirstCircuit () {  
   // Input signals
   signal input a;
   signal input b;

   // Internal signals
   signal x;
   signal y;

   // Output signal
   signal output Q;

   // Components
   component andGate = AND();
   component orGate = OR();
   component notGate = NOT();

   // Logic
   andGate.a <== a;
   andGate.b <== b;
   x <== andGate.y;

   notGate.in <== b;
   y <== notGate.out;

   orGate.a <== x;
   orGate.b <== y;
   Q <== orGate.y;
}

template AND() {
   signal input a;
   signal input b;
   signal output y;
   y <== a * b;
}

template OR() {
   signal input a;
   signal input b;
   signal output y;
   y <== a + b - a * b;
}

template NOT() {
   signal input in;
   signal output out;
   out <== 1 + in - 2 * in;
}

component main = FirstCircuit();
```

### Installation

Install the required dependencies with:

```bash
npm i
```

### Compilation

Compile the circuit with:

```bash
npx hardhat circom
```

This command generates the **out** file, which includes the circuit intermediaries and the **MultiplierVerifier.sol** contract.

### Prove and Deploy

Deploy the circuit and verifier with:

```bash
npx hardhat run scripts/deploy.ts --network sepolia
```

This script performs the following tasks:
1. Deploys the `MultiplierVerifier.sol` contract.
2. Generates a proof from the circuit intermediaries using `generateProof()`.
3. Creates the calldata using `generateCallData()`.
4. Calls `verifyProof()` on the deployed verifier contract with the generated calldata.

With these commands, you can compile a ZKP, generate a proof, deploy a verifier, and verify the proof üéâ.

## Configuration

### Directory Structure

**circuits**

```
‚îú‚îÄ‚îÄ multiplier
‚îÇ   ‚îú‚îÄ‚îÄ circuit.circom
‚îÇ   ‚îú‚îÄ‚îÄ input.json
‚îÇ   ‚îî‚îÄ‚îÄ out
‚îÇ       ‚îú‚îÄ‚îÄ circuit.wasm
‚îÇ       ‚îú‚îÄ‚îÄ multiplier.r1cs
‚îÇ       ‚îú‚îÄ‚îÄ multiplier.vkey
‚îÇ       ‚îî‚îÄ‚îÄ multiplier.zkey
‚îú‚îÄ‚îÄ new-circuit
‚îî‚îÄ‚îÄ powersOfTau28_hez_final_12.ptau
```

Each new circuit resides in its own directory. The top-level files in each circuit directory include the Circom circuit file and its input data. The **out** directory is autogenerated and contains compiled outputs, keys, and proofs. The Powers of Tau file, sourced from the Polygon Hermez ceremony, eliminates the need for a new ceremony.

**contracts**

```
contracts
‚îî‚îÄ‚îÄ MultiplierVerifier.sol
```

Verifier contracts are autogenerated with names prefixed by the circuit name, such as **Multiplier** in this example.

## `hardhat.config.ts`

```typescript
circom: {
  // (optional) Base path for input files, defaults to `./circuits/`
  inputBasePath: "./circuits",
  // (required) The final ptau file, relative to inputBasePath, from a Phase 1 ceremony
  ptau: "powersOfTau28_hez_final_12.ptau",
  // (required) Each object in this array refers to a separate circuit
  circuits: JSON.parse(JSON.stringify(circuits))
}
```

### `circuits.config.json`

Circuit configuration is separated from `hardhat.config.ts` for **autogenerated** purposes:

```json
[
  {
    "name": "multiplier",
    "protocol": "groth16",
    "circuit": "multiplier/circuit.circom",
    "input": "multiplier/input.json",
    "wasm": "multiplier/out/circuit.wasm",
    "zkey": "multiplier/out/multiplier.zkey",
    "vkey": "multiplier/out/multiplier.vkey",
    "r1cs": "multiplier/out/multiplier.r1cs",
    "beacon": "0102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f"
  }
]
```

### Adding Circuits

To add a new circuit, use the `newcircuit` Hardhat task to autogenerate configuration and directories:

```bash
npx hardhat newcircuit --name newcircuit
```

## Contact

For any questions or inquiries, feel free to reach out via email at [arpitdhasmana71@gmail.com](mailto:arpitdhasmana71@gmail.com) or open an issue in the GitHub repository.

## License

This project is licensed under the MIT License - see the LICENSE.md file for details.
